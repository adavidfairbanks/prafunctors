\documentclass{amsart}
\input{decls}
\title{Polynomial comonoids and bicomodules}
\begin{document}
\maketitle

\vspace{1.5em}

\iffalse
  A \emph{polynomial}\footnote{The name refers to a correspondence
    between families of sets and sums of powers, illustrated by the
    example
    ${2y^4 + y^2 + y \leftrightarrow
      \{\{\ast,\ast,\ast,\ast\},\{\ast,\ast,\ast,\ast\},\{\ast,\ast\},
      \{\ast\}\}}$.} is an indexed family of sets.

  The indexes of sets are called \emph{positions}, and the members of
  indexed sets are called \emph{directions}.

  We will visualize a polynomial as a collection of corollas.

  % figure

  A corolla is a node with arrows pointing out from it; this denotes a
  position and the directions from it.
\fi

Recall the \emph{substitution product} of polynomials $P$ and $Q$, denoted
$P \sub Q$.

\iffalse
  From polynomials $P$ and $Q$, we can form a new polynomial
  of all the possible two-story trees built by stacking $Q$
  corollas atop a $P$ corolla. This is called the \emph{substitution
    product}, denoted $P \sub Q$.
\fi

\begin{itemize}
\item A position $a$ in $P \sub Q$ consists of a position $a_\base$ in
  $P$ and positions $a_f$ in $Q$ for each direction $f$ from
  $a_\base$.
\item A direction from position $a$ in $P \sub Q$ consists of a
  direction $f$ from $a_\base$ and a direction $g$ from $a_f$.
\end{itemize}
\vspace{.5em}
\begin{center}
  \input{fig/sub1.tikz}
  \qquad
  {\Large$=$}
  \quad
  \input{fig/sub2.tikz}
\end{center}
\vspace{1em}

We denote such a direction from such a position in a substitution
product by $f \subd g$.\footnote{Be aware there may be other
  directions named $f \subd g$ from other positions in
  $P \sub Q$.} Accordingly, $\idsubd$ will denote the unique direction
from the unique position in the unit for substitution $\idsub$
(a.k.a. the polynomial $y$).\footnote{Given directions $f$,
    $g$, and $h$ respectively belonging to polynomials $P$, $Q$, and
    $R$, directions of the form $(f \subd g)\subd h$ belonging to
    $(P \sub Q) \sub R$ and directions of the form
    $f \subd (g \subd h)$ belonging to $P \sub (Q \sub R)$ are
    identified under the relevant monoidal coherence
    isomorphism. Hence brackets can be omitted.

  Similarly, for any direction $f$ belonging to a polynomial $P$, we
  have that $\idsubd \subd f$ and $f \subd \idsubd$ (respectively
  belonging to $\idsub \sub P$ and $P \sub \idsub$) are both
  canonically identified with $f$.}

\iffalse
  Suppose we have polynomials $P$ and $Q$ and the following
  structure relating them.
  \begin{itemize}
  \item A function $\alpha_1$ from the positions of $P$ to the
    positions of $Q$.
  \item For each position $a$ in $P$, a function $\alpha^\sharp_a$ from the
    directions of $\alpha(a)$ back to the directions of $a$.
  \end{itemize}
  This is called a \emph{transformation} from $P$ to $Q$ (written
  $\alpha: P \to Q$).

  We think of this as a way of replacing each corolla from $P$ with a
  a corolla from $Q$.

  % diagram

  The \emph{composite} of transformations $\alpha : P \to Q$ and
  $\beta : Q \to R$, denoted $\alpha \fatsemi \beta : P \to R$,
  is defined by
  \[
    \posmap{(\alpha \fatsemi \beta)}{a} = \posmap{\beta}{\posmap{\alpha}{a}}
    \quad \text{ and } \quad
    \dirmap{(\alpha \fatsemi \beta)}{a}{f} =
    \dirmap{\alpha}{a}{\dirmap{\beta}{\posmap{\alpha}{a}}{f}},
  \] i.e., we do the corolla replacements in order.

  % diagram

  This definition of transformation plays well with the substitution
  product.

  % definition of parallel composition of transformations
\fi

Note the following identity for transformations $\alpha$ and $\beta$
between polynomials.
\[\dirmap{(\alpha \sub \beta)}{a}{f \subd g} = \underbrace{\dirmap{\alpha}{(a_\base)}{f}}_{\backref}
  \subd \dirmap{\beta}{(a_{\backref})}{g}.\] Or in brief, ``we have
$\anydirmap{(\alpha \sub \beta)}{f \subd g} = \anydirmap{\alpha}{f}
\subd\anydirmap{\beta}{g}$ whenever this makes sense.''\footnote{Meaning,
  ${\dirmap{(\alpha \sub \beta)}{a}{f \subd g}}$ is defined $\iff$
  there are $u$ and $v$ such that
  ${\dirmap{\alpha}{u}{f} \subd \dirmap{\beta}{v}{g}}$ actually
  describes a direction from $a$; in this case, the former and latter
  are equal.
  
  (We are assuming the analogue of this property holds for $\alpha$
  and $\beta$ themselves: if any $\dirmap{\alpha}{u}{f}$ has the same
  name as a direction from $a$, then $\dirmap{\alpha}{a}{f}$ is
  defined with that value --- and likewise for $\beta$. This is
  trivially so if across the domains of $\alpha$ and $\beta$ we use
  different names for different directions.)
}

\iffalse
  The directions from $a$ are of the form $f' \subd g'$,
  where $f'$ is a direction from $a_\base$ and $g'$ is a direction
  from $a_{f'}$. Hence if the expression
  $\dirmap{\alpha}{x}{f} \subd dirmap{\beta}{y}{g}$ is to describe a
  direction from $a$, then $x$ should be $a_\base$, and $y$ should
  be $a_{f'}$.
\fi

\iffalse
  Given a transformation $\alpha$, the map $\alpha_0$ is implicitly
  determined by the domains of the $\alpha^\sharp$
  maps. Moreover, a position in a substitution product is determined
  by the set of names of directions from it (at least, assuming
  the positions in the factor polynomials have this property too), even though
  distinct positions may share certain direction names.

  Hence an equation between horizontal ($\sub$) composites of transformations
  amounts to firstly an identification between domains of the composite
  $\sharp$ maps and secondly their agreement in mapping.

  (We can more generally think of any equality between transformations in
  terms of identification of $\sharp$ maps' domains and their
  agreement in mapping. But this is only interesting when we
  have some reason to think of distinct $\sharp$ domains as sharing
  certain direction names.)

  We can translate arbitrary equalities built from $\sub$
  into equalities built from $\subd$, e.g.
  \[\gamma \fatsemi (\alpha \sub \beta) = \delta \sub \varepsilon
    \iff \gamma^\sharp (\alpha^\sharp \subd \beta^\sharp) =
    \delta^\sharp \subd \varepsilon^\sharp\] for all such
  $\sharp$ maps and values that fit together. Here we may think of the
  equality as indicating agreement about the definedness
  on each potential value of the form $f \subd g$ (i.e. agreement on
  domain), as well as agreement about where each of these values is
  mapped.

  Alternatively, we may think of this fiberwise, such a map being
  completely determined by what subset of values of the form
  $f \subd g$ lies over each individual direction.
\fi

\begin{prop}
  Polynomial comonoids are categories.
\end{prop}
\begin{proof}
  Let $C$ be a polynomial comonoid. Denote counit by $\varepsilon$
  and comultiplication by $\delta$.
  
  \begin{center}
    \input{fig/counit1.tikz}
    \hspace{-.75em}
    $\underset{\varepsilon}{\transformto}$
    \input{fig/counit2.tikz}
    \quad\qquad
    \input{fig/comult1.tikz}
    \hspace{-.75em}
    $\underset{\delta}{\transformto}$
    \hspace{.5em}
    \input{fig/comult2.tikz}
  \end{center}

  \begin{center}
    \input{fig/idl.tikz}
    \quad
    $\canoniso$
    \input{fig/id.tikz}
    $\canoniso$
    \quad
    \input{fig/idr.tikz}
  \end{center}

  \begin{center}
    \input{fig/assocl.tikz}
    \quad
    $\canoniso$
    \quad
    \input{fig/assocr.tikz}
  \end{center}

  Observe first that the right identity law forces $\posmap{\delta}{a}_\base = a$
  for all $a \in \pos{C}$.
  Therefore the expression $\posmap{\delta}{a}_f$ for $f \in \dir{C}{a}$ has a
  well-defined meaning.

  We gather the data for a category $\cat{C}$.
  \begin{itemize}
  \item The set of objects $\Ob(\cat{C})$ is $\pos{C}$, the set
    of positions in $C$.
  \item The set of arrows $\Arr(\cat{C})$ is
    $\sum_{a \in \pos{C}}\dir{C}{a}$, the set of all directions in $C$.
  \item The source map $s$ sends each $f \in \dir{C}{a}$ to $a$. (Hence the
    polynomial $C$ is described by the bundle
    $\Arr(\cat{C}) \bundle{s} \Ob(\cat{C})$.)
  \item The target map $t$ sends each $f \in \dir{C}{a}$ to $\posmap{\delta}{a}_f$.
  \item The identity map $e$ sends each $a \in \pos{C}$ to
    $\dirmap{\varepsilon}{a}{\idsubd}$.
  \item The composition map $m$ sends each pair of compatible
    arrows ${f \in \dir{C}{a}}, {g \in \dir{C}{t(f)}}$ to $\dirmap{\delta}{a}{f \subd g}$.
  \end{itemize}

  Next, observe that if we have such prerequisite data (not laws) for
  a category, subject to just the law $s(e(a)) = a$, then we find that
  further imposing the left identity law $m(e(s(f)), f) = f$
  (and requiring that both sides are defined whenever one is)
  automatically forces the law $t(e(a)) = a$ to hold.\footnote{We have
    $m(e(s(e(a))), e(a)) = e(a)$, since the right side is defined. The
    left side reduces to $m(e(a), e(a))$. This expression only makes
    sense if $t(e(a)) = s(e(a))$, which is $a$.}  Similarly, if we
  have the law $s(m(f,g))=s(f)$ as well as $t(e(a)) = a$, then the
  associativity law $m(m(f,g),h) = m(f,m(g,h))$ forces
  $t(m(f,g)) = t(g)$.\footnote{Given that $f$ and $g$ are composable,
    we have $m(m(f,g),e(t(g))) = m(f,m(g,e(t(g))))$, since the right
    side is defined. The left side only makes sense if
    $t(f,g) = s(e(t(g)))$, which is $t(g)$.}

  We verify the data from above satisfy the laws of a category.
  \begin{itemize}
  \item The law $s(e(a)) = a$ is true by construction; $e(a)$ is a
    direction from the position $a$.
  \item The law $s(m(f, g)) = s(f)$ is true by construction; $m(f, g)$
    is a direction from the position $s(f)$.
  \item The left identity law $m(e(s(f)), f) = f$ is directly
    expressed by the comonoid left identity law, which identifies
    ${\anydirmap{\delta}{\anydirmap{\varepsilon}{\idsubd} \subd f}}$
    with $f$ whenever this makes sense.\iffalse\footnote{Meaning,
        there are $u$ and $v$ such that
        ${\dirmap{\delta}{u}{\dirmap{\varepsilon}{v}{\idsubd} \subd
            f}}$ specifies a direction from position $a$ $\iff$ $f$
        specifies a direction from position $a$; in this case, the
        former and latter are equal.}\fi
  \item The right identity law $m(f, e(t(f))) = f$ is directly
    expressed by the comonoid right identity law, which identifies
    ${\anydirmap{\delta}{f \subd \anydirmap{\varepsilon}{\idsubd}}}$
    with $f$ whenever this makes sense.
  \item The associativity law $m(m(f, g), h) = m(f, m(g, h))$ is
    directly expressed by the comonoid associativity law, which
    identifies
    ${\anydirmap{\delta}{\anydirmap{\delta}{f \subd g} \subd h}}$ with
    ${\anydirmap{\delta}{f \subd \anydirmap{\delta}{g \subd h}}}$ whenever this makes sense.
  \item The law $t(e(a)) = a$ is forced to hold (due to the comonoid
    left identity law).
  \item The law $t(m(f, g)) = t(g)$ is forced to hold (due to the
    comonoid associativity law).
  \end{itemize}

  Conversely, let $\cat{C}$ be a category. We immediately obtain the
  bundle ${\Arr(\cat{C})\bundle{s}\Ob(\cat{C})}$. Let $C$ denote
  the polynomial described by this bundle (the ``outfacing polynomial''
  of $\cat{C}$). We exhibit a comonoid struture on $C$.
  \begin{itemize}
  \item The counit $\varepsilon$ singles out the identity in each
    object's set of outfacing maps.
  \item The comultiplication $\delta$ endows each object $a$ with the
    map $\delta^\sharp_a$ sending $f \subd g$ to $m(f, g)$ for all
    arrows of the form $f: a \to b$, $g: b \to c$ (through which the
    map $\delta_0$ is implicit).
  \end{itemize}

  The above processes of translation between the prerequisite data
  (not laws) for a category subject to just $s(e(a)) = a$ and
  $s(m(f, g)) = g$, and the prerequisite data (not laws) of a
  polynomial comonoid subject to just
  $\posmap{\delta}{a}_\base = a$, are inverse by
  construction. Moreover, we saw earlier that the identity and
  associativity category laws, in this context, directly translate
  to the identity and associativity comonoid laws.
\end{proof}

\begin{prop}
  A polynomial right comodule amounts to a family of copresheaves.
\end{prop}
\begin{proof}
  Let $(D, \varepsilon, \delta)$ be a polynomial comonoid and let
  $M$ be a right comodule on $D$. Denote right comodule
  comultiplication by $\rho$.

  \begin{center}
    \input{fig/rmod1.tikz}
    \hspace{-.75em}
    $\underset{\rho}{\transformto}$
    \hspace{.5em}
    \input{fig/rmod2.tikz}
  \end{center}

  \begin{center}
    \input{fig/modid.tikz}
    $\canoniso$
    \quad
    \input{fig/rmodid.tikz}
  \end{center}

  \begin{center}
    \input{fig/rmodassocl.tikz}
    \quad
    $\canoniso$
    \quad
    \input{fig/rmodassocr.tikz}
  \end{center}

  Observe first that the identity law forces $\posmap{\rho}{a}_\base = a$
  for all $a \in \pos{M}$.
  Therefore the expression $\posmap{\rho}{a}_x$ for $x \in \dir{M}{a}$ has a
  well-defined meaning.

  Let $\cat{D}$ be the category corresponding to $D$. We gather the
  data for a family of copresheaves $\{X_a\}_{a \in A}$ on $\cat{D}$.
  \begin{itemize}
  \item The family's indexing set $A$ is $\pos{M}$, the set
    of positions in $M$.
  \item The total set of elements $\sum_{d \in \Ob(\cat{D})}X_a(d)$ in
    $X_a$ is $\dir{M}{a}$, the set of directions $a$.
  \item The bundle map $t$ assigning each element $x$ in $X_a$ its indexing
    object in $\Ob(\cat{D}) = \pos{D}$ is given by $\posmap{\rho}{a}_x$.
  \item The multiplication map $m$ sends each element $x \in X_a(d)$ and compatible
    arrow $f \in \dir{D}{d}$ to $\dirmap{\rho}{a}{x \subd f}$.
  \end{itemize}
  
  Next, observe that if we have such prerequisite data (not laws) for
  a copresheaf on $\cat{D}$, then we find that imposing the copresheaf
  associativity law $m(m(x, f), g) = m(x, m(f, g))$ forces the law
  $t(m(x,f)) = t(f)$ to hold.\footnote{Given that $x$ and $f$ are
    composable, we have $m(m(x,f),e(t(f))) = m(x,m(f,e(t(f))))$, since
    the right side is defined. The left side only makes sense if
    $t(x,f) = s(e(t(f)))$, which is $t(f)$.} (The argument works the same
  for copresheaves as it does for categories.)

  We verify each $X_a$ satisfies the laws of a copresheaf on $\cat{D}$.
  \begin{itemize}
  \item The identity law $m(x, e(t(x))) = x$ is directly expressed by
    the right comodule identity law, which identifies
    ${\anydirmap{\rho}{x \subd \anydirmap{\varepsilon}{\idsubd}}}$
    whenever this makes sense.
  \item The associativity law $m(m(x, f), g) = m(x, m(f, g))$ is
    directly expressed by the right comodule associativity law, which
    identifies
    ${\anydirmap{\rho}{\anydirmap{\rho}{x \subd f} \subd g}}$ with
    ${\anydirmap{\rho}{x \subd \anydirmap{\delta}{f \subd g}}}$ whenever this makes sense.
  \item The law $t(m(x, f)) = t(f)$ is forced to hold (due to the
    right comodule associativity law).
  \end{itemize}

  Conversely, let $\{X_a\}_{a \in A}$ be a family of copresheaves on
  $\cat{D}$. Let $M$ denote the polynomial described by the family of
  total sets of elements
  $\{\sum_{d \in \Ob(\cat{D})}X_a(d)\}_{a \in A}$. We exhibit a right
  $D$-comodule struture on $M$.
  \begin{itemize}
  \item The comodule map $\rho$ endows each position $a \in A$ with
    the map $\delta^\sharp_a$ sending each $x \subd f$ to
    $x \fatsemi f$ for all $x \in X_a(d), f: d \to d' \in \cat{D}$
    (through which the map $\delta_0$ is implicit).
  \end{itemize}

  The above processes of translation between the prerequisite data
  (not laws) for a family of presheaves on $\cat{D}$, and the
  prerequisite data (not laws) of a right $D$-comodule subject to just
  $\posmap{\rho}{a}_\base = a$, are inverse by
  construction. Moreover, we saw earlier that the identity and
  associativity copresheaf laws, in this context, directly translate
  to the identity and associativity right comodule laws.
\end{proof}

\begin{prop}
  A polynomial left comodule amounts to a copresheaf and a presheaf on that
  copresheaf's category of elements.
\end{prop}
\begin{proof}
  Let $(C, \varepsilon, \delta)$ be a polynomial comonoid and let $M$ be a left comodule on
  $C$. Denote left comodule
  comultiplication by $\lambda$.

  \begin{center}
    \input{fig/lmod1.tikz}
    \hspace{-.75em}
    $\underset{\lambda}{\transformto}$
    \hspace{.5em}
    \input{fig/lmod2.tikz}
  \end{center}

  \begin{center}
    \input{fig/lmodid.tikz}
    \quad
    $\canoniso$
    \input{fig/modid.tikz}
  \end{center}
  
  \begin{center}
    \input{fig/lmodassocl.tikz}
    \quad
    $\canoniso$
    \quad
    \input{fig/lmodassocr.tikz}
  \end{center}

  Let $\cat{C}$ be the category corresponding to $C$. We gather the
  data for a copresheaf $X$ on $\cat{C}$.
  \begin{itemize}
  \item The total set of elements $\sum_{c \in \Ob(\cat{C})}X(c)$ in
    $X$ is $\pos{M}$, the set of positions in $M$.
  \item The bundle map $t$ assigning each element $x$ in $X$ its indexing
    object in $\Ob(\cat{C}) = \pos{C}$ is given by $\posmap{\lambda}{x}_\base$.
  \item The multiplication map $m$ sends each element $x \in \pos{M}$
    and compatible arrow $f \in \dir{C}{t(x)}$ to
    $\posmap{\lambda}{x}_f$.
  \end{itemize}

  Now we gather the remaining data of a presheaf $Z$ on
  $\int_{\cat{C}}X$, the category of elements of $X$. (We will have
  accumulated the data sans laws of a copresheaf on $\cat{C}$ and
  presheaf on its category of elements; we are still yet to
  verify $X$ satisfies the laws of a copresheaf on $\cat{C}$.)
  \begin{itemize}
  \item The set $Z(x)$ for $x \in \Ob(\int_{\cat{C}}X) = \pos{M}$ is
    $\dir{M}{x}$, the set of directions from $x$. Hence we obtain the
    bundle map $s$ from the total set of elements
    $\sum_{x \in \Ob(\int_{\cat{C}}X)}Z(x)$ to $\Ob(\int_{\cat{C}}X)$
    sending each $z \in Z(x)$ to $x$.
  \item The multiplication map $m$ sends each arrow $f|_w: w \to x$
    (in $\int_{\cat{C}}X$, lying over $f: t(w) \to t(x)$ in $\cat{C}$)
    and $x$-indexed element $z \in Z(x) = \dir{M}{x}$ to
    $\dirmap{\lambda}{w}{f \subd z}$.

    (To be clear, the domain of this map is the set of tuples
    $(w, f, z)$ such that $t(w) = s(f)$ and $m(w, f) = s(z)$. This is
    indeed the set of pairs $(f|_w, z)$ belonging in the domain of
    multiplication for our presheaf on $\int_{\cat{C}}X$, since an arrow
    $f|_w$ in $\int_{\cat{C}}X$ is a pair $(w, f)$ such that
    $t(w) = s(f)$, and the target of this arrow is $m(w, f)$.)
  \end{itemize}

  We will also use the following notation for identities and
  composition in $\int_{\cat{C}}X$.
  \begin{itemize}
  \item If $x$ is an element of $X$, then $e(x)$ will refer to
    $e(t(x))|_x$.
  \item If $f|_w$ and $g|_x$ are composable arrows in $\int_{\cat{C}}X$
    (i.e., $x = m(w,f)$ --- and $t(f) = s(g)$?), then $m(f|_w, g|_x)$ will refer to
    $m(f, g)|_w$.
  \end{itemize}

  Next, observe that if we have such prerequisite data (not laws) for
  a copresheaf on $\cat{C}$ and presheaf on its category of elements,
  then we find that imposing the presheaf identity law
  $m(e(s(z)), z) = z$ forces the copresheaf identity law
  $m(x, e(t(x))) = x$ to hold for $x = s(z)$.\footnote{The expression
    $m(e(s(z)), z)$ is short for $m(e(t(s(z)))|_{s(z)},z)$, and if
    this is defined, then $m(s(z), e(t(s(z)))) = s(z)$.} Similarly,
  imposing the presheaf associativity law
  $m(m(f|_w, g|_x), z) = m(f|_w, m(g|_x, z))$ forces the copresheaf
  associativity law $m(m(w, f), g) = m(w, m(f, g))$ to hold for
  $f$ and $g$ such that one of these expressions is defined for some
  $w$, $x$, $z$.\footnote{The expression
    $m(m(f|_w, g|_{m(w, f)}), z)$ is ``short'' for $m(m(f, g)_w, z)$,
    and if this is defined, then $m(w, m(f, g)) = s(z)$. Meanwhile, if
    $m(f|_w, m(g|_{m(w, f)}, z))$ is defined, then
    $m(m(w, f), g) = s(z)$.}
  
  We verify $Z$ satisfies the laws of a presheaf on $\int_{\cat{C}}X$.
  \begin{itemize}
  \item The identity law $m(e(s(z)), z) = z$ is
    expressed by the left comodule identity law, which identifies
    ${\anydirmap{\lambda}{\anydirmap{\varepsilon}{\idsubd} \subd z}}$ with
    $z$ whenever this makes sense.
  \item The associativity law
    $m(m(f|_w, g|_x), z) = m(f|_w, m(g|_x, z))$ is
    expressed by the left comodule associativity law, which identifies
    ${\anydirmap{\lambda}{\anydirmap{\delta}{f \subd g} \subd z}}$
    with
    ${\anydirmap{\lambda}{f \subd \anydirmap{\lambda}{g \subd z}}}$
    whenever this makes sense.
  \end{itemize}

  \iffalse

    We verify $X$ satisfies the laws of a copresheaf on $\cat{C}$.
    \begin{itemize}
    \item The identity law $m(x, e(t(x))) = x$ is implied by the left
      comodule identity law, which
    \item The associativity law $m(m(z, f), g) = m(z, m(f, g))$ is
      implied by the left comodule associativity law, which
    \item The law $t(m(x, f)) = t(f)$ is forced to hold by the
      associativity law, as seen earlier.
    \end{itemize}

  The law $s(m(f|_w, z)) = s(f|_w)$ is forced to hold by the
    associativity law, in the same way as was seen earlier, keeping in
    mind that here the laws $t(e(x)) = x$ and
    $t(m(f|_w, g|_{m(w,f)})) = t(g|_{m(w,f)})$ are satisfied.
  \fi
  
\end{proof}

\begin{prop}
  Polynomial bicomodules are prafunctors between presheaf categories.
\end{prop}
\begin{proof}
  Let $(C, \varepsilon_C, \delta_C)$ and
  $(D, \varepsilon_D, \delta_D)$ be polynomial comonoids and let
  $(M, \lambda, \rho)$ be a bimodule from $C$ to $D$.
  \begin{center}
    \input{fig/modassocl.tikz}
    \quad
    $\canoniso$
    \quad
    \input{fig/modassocr.tikz}
  \end{center}

  We will show that $M$ amounts to a profunctor\footnote{The notation
    $\cat{A} \prof \cat{B}$ for a profunctor
    $\cat{A}^\op \times \cat{B} \to \Set$ is due to Michael Shulman.}
  $(\int_{\cat{C}} X) \prof \cat{D}$, where $\cat{C}$ is the category
  corresponding to $C$, $X$ is the copresheaf on $\cat{C}$ induced by
  $M$ as a left comodule, and $\cat{D}$ is the category corresponding
  to $D$.

  Such a profunctor is equivalent to a prafunctor
  $\Set^{\cat{D}} \to \Set^{\cat{C}}$. Indeed,

  \begin{align*}
    &\cong
  \end{align*}
  
\end{proof}

\begin{prop}
  Maps between bicomodules are natural transformations between prafunctors.
\end{prop}
\begin{proof}
  
\end{proof}

\begin{prop}
  Composition of bicomodules is composition of prafunctors.
\end{prop}
\begin{proof}
  Bicomodules from $D$ to $0$ specialize copresheaves on $D$ (and maps
  between such bicomodules are copresheaf maps). Hence each bicomodule
  $M$ from $D$ to $D$ induces a functor $F_M$ from $D$-copresheaves to
  $C$-copresheaves by precomposition. Accordingly, we have
  $F_{M \sub_D N} \cong F_N \fatsemi F_M$ (for bicomodules $M$ from
  $C$ to $D$ and $N$ from $D$ to $E$).
  
  We show that the prafunctor corresponding to the bimodule $M$ is
  $F_M$.

  
\end{proof}

\end{document}